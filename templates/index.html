{% extends "base.html" %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 2rem auto; font-size: 18px; line-height: 1.6; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h2 style="color: #4b0082; font-size: 2rem; margin-bottom: 1.5rem;">Car Goal Planner</h2>
    
    <form id="goal-form">
        <h3 style="color: #6a0dad;">Car Details</h3>
        
        <div style="margin-bottom: 1rem;">
            <label style="margin-right: 1rem;"><input type="radio" name="is_new" value="true"> New Car</label>
            <label><input type="radio" name="is_new" value="false"> Used Car</label>
        </div>
        
        <div style="margin-bottom: 1rem;">
            <label for="model" style="display: block; font-weight: bold;">Model:</label>
            <select id="model" name="model" style="width: 100%; padding: 0.5rem;">
                <option value="">-- Select a model --</option>
                <option value="Mercedes C200 2020">Mercedes C200 2020</option>
                <option value="Mercedes S-Class">Mercedes S-Class</option>
                <option value="Mercedes E-Class">Mercedes E-Class</option>
                <option value="Maybach S-Class">Maybach S-Class</option>
                <option value="Lancer EX 2016">Lancer EX 2016</option>
                <option value="Toyota Prado 2018">Toyota Prado 2018</option>
            </select>
        </div>

        <div style="margin-bottom: 1rem;">
            <label for="year" style="display: block; font-weight: bold;">Year:</label>
            <select id="year" name="year" style="width: 100%; padding: 0.5rem;">
                <option value="">-- Select year --</option>
                {% for year in range(2025, 2015, -1) %}
                    <option value="{{ year }}">{{ year }}</option>
                {% endfor %}
            </select>
        </div>

        <div style="margin-bottom: 1rem;">
            <label for="max_mileage" style="display: block; font-weight: bold;">Max Mileage:</label>
            <input type="number" id="max_mileage" name="max_mileage" placeholder="Enter max mileage" style="width: 100%; padding: 0.5rem;">
        </div>

        <h3 style="color: #6a0dad;">Payment Method</h3>
        <div style="margin-bottom: 1rem;">
            <label style="margin-right: 1rem;"><input type="radio" name="payment_method" value="cash"> Cash</label>
            <label><input type="radio" name="payment_method" value="financing"> Financing</label>
        </div>

        <div id="financing-options" style="display: none; margin-top: 1rem;">
            <div style="margin-bottom: 1rem;">
                <label for="max_emi" style="display: block; font-weight: bold;">Monthly EMI (AED):</label>
                <input type="number" id="max_emi" name="max_emi" placeholder="Monthly EMI" style="width: 100%; padding: 0.5rem;">
            </div>

            <div style="margin-bottom: 1rem;">
                <label for="max_term" style="display: block; font-weight: bold;">Max Financing Term (months):</label>
                <input type="number" id="max_term" name="max_term" placeholder="Max term" style="width: 100%; padding: 0.5rem;">
            </div>

            <div style="margin-bottom: 1rem; display: none;">
                <label for="down_payment" style="display: block; font-weight: bold;"></label>
                <input type="number" id="down_payment" name="down_payment" value="100000" style="width: 100%; padding: 0.5rem;">
            </div>

            <div style="margin-bottom: 1rem; display: none;">
                <label for="interest_rate" style="display: block; font-weight: bold;"></label>
                <input type="number" id="interest_rate" name="interest_rate" value="10" step="0.1" style="width: 100%; padding: 0.5rem;">
            </div>

            <div style="margin-bottom: 1rem; visibility: hidden;">
                <label for="down_payment" style="display: block; font-weight: bold;"></label>
                <input type="number" id="down_payment" name="down_payment" value="100000" style="width: 100%; padding: 0.5rem;">
            </div>

            <div style="margin-bottom: 1rem; visibility: hidden;">
                <label for="interest_rate" style="display: block; font-weight: bold;"></label>
                <input type="number" id="interest_rate" name="interest_rate" value="10" step="0.1" style="width: 100%; padding: 0.5rem;">
            </div>

        <button type="submit" style="background: linear-gradient(to right, #ffd700, #daa520); color: #4b0082; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; font-weight: bold; font-size: 1rem; margin-top: 1rem; cursor: pointer;">Calculate Plan</button>
    </form>

    <div id="results" style="display: none; margin-top: 2rem;">
        <h3 style="color: #6a0dad;">Your Car Purchase Plan</h3>
        <div id="time-chart" style="margin-bottom: 1rem;"></div>
        
        <div class="result-details" style="background: #f5f5f5; padding: 1rem; border-radius: 6px;">
            <h4 style="margin-bottom: 0.5rem;">Summary</h4>
            <p>Car Model: <strong><span id="car-model"></span></strong></p>
            <p>Car Price: <strong><span id="car-price"></span></strong> AED</p>
            <p>Estimated Purchase Date: <strong><span id="estimated-date"></span></strong></p>
            <p>Down Payment: <strong><span id="down-payment"></span></strong> AED</p>
            <p id="emi-details" style="display: none;">Monthly EMI: <strong><span id="monthly-emi"></span></strong> AED for <strong><span id="payment-period"></span></strong> months</p>
        </div>
        
        <p id="promotion" style="display: none; margin-top: 1rem; font-weight: bold; color: #d35400;">Promotion Available! Contact our sales team for more details.</p>
        <button id="save-data" style="margin-top: 1rem; background: linear-gradient(to right, #ffd700, #daa520); color: #4b0082; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; font-weight: bold; font-size: 1rem; cursor: pointer;">Save This Plan</button>
    </div>
</div>
{% endblock %}
